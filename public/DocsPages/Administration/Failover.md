# 故障转移
当实例离线时, 可能是因为网络不稳定或者其他更严重的问题, 列如系统暴毙.
在多实例集群中, 如果一个实例突然离线，但其中表具有分布在多个物理服务器之间的多个副本的话, 大多数情况下RethinkDB会自动剔除离线节点并保持可用性.

如果需要表自动执行故障转移要求满足以下条件:
* 集群中实例必须大于等于3个
* 表必须已经配置了大于等于3个的副本
* 表的大多数(大于一半)副本必须可用

如果表的主副本离线了，超过一半以上副本报告可用一致且分片正常那么这个表就可用, 并会从这些表副本中自动选择一个成为表主副本. 
切换时表会不可用一段较短的时间，并不会丢失数据所以不要慌. 如果表配置中的主副本离线恢复后会变回主副本.

如果超过一半报告分片副本丢失那么请执行___紧急修复___操作. 如您想了解紧急修复操作请查阅[reconfigure](https://www.rethinkdb.com/api/javascript/reconfigure).

> 报告或不报告? 默认情况下所有副本都会报告, 报告会被计入数据副本是否可用的统计. 但是报告速度会受到
> 网络延迟影响从而影响表恢复速度, 如果您的集群是跨机房的您可能会希望副本不报告来提高恢复速度. 
> 您可以通过`reconfigure`来设置无需报告

## 自动故障转移限制
大多数情况下多数副本报告可用那么就会自动执行故障转移. 但是其中有个情况就网络问题导致其无法执行.
试想下假设集群内有3个实例：A, B, C都可以互相连接如果发生网络错误: A可以连接到B，B可以连接到C，然而A无法连接到C. 
这样也会导致自动故障转移出现问题. 对于更深入的描述以及解决方案请查看[Github issue #4357](https://github.com/rethinkdb/rethinkdb/issues/4357)

由于自动故障转移最低触发条件为3个实例, 在2个实例集群中如果其中任意一个实例离线, 那么会导致表变成只读表.
如果故障实例无法恢复，您必须通过`reconfigure`命令来手动修复表.